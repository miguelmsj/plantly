appId: com.miguelmsj.plantly
---
# Plant Management Flow Test
# Tests adding a new plant and viewing it in the list

- launchApp

# Complete onboarding if it shows up
- runFlow:
    file: ../subflows/complete-onboarding.yaml

# Should be on the main screen with "Add your first plant" button
- assertVisible: "Add your first plant"

# Tap to add a new plant
- tapOn: "Add your first plant"

# Should be on the new plant screen
- assertVisible: "Name"
- assertVisible: "Watering frequency (every x days)"

# Fill in plant details
- tapOn: "E.g Casper the Cactus"
- inputText: "My Test Plant"
- hideKeyboard

# Fill in watering frequency
- tapOn: "E.g 6"
- inputText: "7"
- tapOn: "Name" # Tap outside the input to close keyboard

# Add the plant
- tapOn: "Add plant"

# Try to find the plant by text first (fallback approach)
- scrollUntilVisible:
    element: "My Test Plant"
    direction: DOWN
    timeout: 10000

# Should return to main screen and see the plant
- assertVisible: "My Test Plant"

- assertVisible: "Water every 7 days"

# Check if we're back on the main screen (no "Add your first plant")
- assertNotVisible: "Add your first plant"
